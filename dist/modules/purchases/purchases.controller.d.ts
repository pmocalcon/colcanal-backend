import { PurchasesService } from './purchases.service';
import { CreateRequisitionDto } from './dto/create-requisition.dto';
import { UpdateRequisitionDto } from './dto/update-requisition.dto';
import { FilterRequisitionsDto } from './dto/filter-requisitions.dto';
import { ReviewRequisitionDto } from './dto/review-requisition.dto';
import { ApproveRequisitionDto, RejectRequisitionDto } from './dto/approve-requisition.dto';
import { ManageQuotationDto } from './dto/manage-quotation.dto';
import { CreatePurchaseOrdersDto } from './dto/create-purchase-orders.dto';
import { CreateMaterialReceiptDto } from './dto/create-material-receipt.dto';
import { UpdateMaterialReceiptDto } from './dto/update-material-receipt.dto';
import { ApprovePurchaseOrderDto } from './dto/approve-purchase-order.dto';
import { User } from '../../database/entities/user.entity';
export declare class PurchasesController {
    private readonly purchasesService;
    constructor(purchasesService: PurchasesService);
    createRequisition(user: User, createRequisitionDto: CreateRequisitionDto): Promise<import("../../database/entities").Requisition>;
    getMyRequisitions(user: User, filters: FilterRequisitionsDto): Promise<{
        data: import("../../database/entities").Requisition[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
    }>;
    getPendingActions(user: User, filters: FilterRequisitionsDto): Promise<{
        data: never[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
        pending: never[];
        processed: never[];
    } | {
        data: any[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
        pending: number;
        processed: number;
    }>;
    getRequisitionsForQuotation(user: User, filters: FilterRequisitionsDto): Promise<{
        data: {
            slaDeadline: Date | null;
            isOverdue: boolean;
            daysOverdue: number;
            requisitionId: number;
            requisitionNumber: string;
            companyId: number;
            projectId: number;
            operationCenterId: number;
            projectCodeId: number;
            createdBy: number;
            statusId: number;
            reviewedBy: number;
            approvedBy: number;
            createdAt: Date;
            updatedAt: Date;
            reviewedAt: Date;
            approvedAt: Date;
            obra: string;
            codigoObra: string;
            company: import("../../database/entities").Company;
            project: import("../../database/entities").Project;
            operationCenter: import("../../database/entities").OperationCenter;
            projectCode: import("../../database/entities").ProjectCode;
            creator: User;
            status: import("../../database/entities").RequisitionStatus;
            reviewer: User;
            approver: User;
            items: import("../../database/entities").RequisitionItem[];
            logs: import("../../database/entities").RequisitionLog[];
            purchaseOrders: import("../../database/entities").PurchaseOrder[];
            approvals: import("../../database/entities").RequisitionApproval[];
        }[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
    }>;
    getMyPendingReceipts(user: User, filters: FilterRequisitionsDto): Promise<{
        data: any[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
    }>;
    getRequisitionById(user: User, id: number): Promise<import("../../database/entities").Requisition>;
    updateRequisition(user: User, id: number, updateRequisitionDto: UpdateRequisitionDto): Promise<import("../../database/entities").Requisition>;
    deleteRequisition(user: User, id: number): Promise<{
        message: string;
    }>;
    reviewRequisition(user: User, id: number, reviewDto: ReviewRequisitionDto): Promise<import("../../database/entities").Requisition>;
    approveRequisition(user: User, id: number, approveDto: ApproveRequisitionDto): Promise<import("../../database/entities").Requisition>;
    getItemApprovals(id: number, approvalLevel?: 'reviewer' | 'management'): Promise<any[]>;
    rejectRequisition(user: User, id: number, rejectDto: RejectRequisitionDto): Promise<import("../../database/entities").Requisition>;
    getRequisitionQuotation(user: User, id: number): Promise<{
        items: {
            quotations: import("../../database/entities").RequisitionItemQuotation[];
            itemId: number;
            requisitionId: number;
            itemNumber: number;
            materialId: number;
            quantity: number;
            observation: string;
            requisition: import("../../database/entities").Requisition;
            material: import("../../database/entities").Material;
            purchaseOrderItems: import("../../database/entities").PurchaseOrderItem[];
        }[];
        requisitionId: number;
        requisitionNumber: string;
        companyId: number;
        projectId: number;
        operationCenterId: number;
        projectCodeId: number;
        createdBy: number;
        statusId: number;
        reviewedBy: number;
        approvedBy: number;
        createdAt: Date;
        updatedAt: Date;
        reviewedAt: Date;
        approvedAt: Date;
        obra: string;
        codigoObra: string;
        company: import("../../database/entities").Company;
        project: import("../../database/entities").Project;
        operationCenter: import("../../database/entities").OperationCenter;
        projectCode: import("../../database/entities").ProjectCode;
        creator: User;
        status: import("../../database/entities").RequisitionStatus;
        reviewer: User;
        approver: User;
        logs: import("../../database/entities").RequisitionLog[];
        purchaseOrders: import("../../database/entities").PurchaseOrder[];
        approvals: import("../../database/entities").RequisitionApproval[];
    }>;
    manageQuotation(user: User, id: number, manageQuotationDto: ManageQuotationDto): Promise<{
        items: {
            quotations: import("../../database/entities").RequisitionItemQuotation[];
            itemId: number;
            requisitionId: number;
            itemNumber: number;
            materialId: number;
            quantity: number;
            observation: string;
            requisition: import("../../database/entities").Requisition;
            material: import("../../database/entities").Material;
            purchaseOrderItems: import("../../database/entities").PurchaseOrderItem[];
        }[];
        requisitionId: number;
        requisitionNumber: string;
        companyId: number;
        projectId: number;
        operationCenterId: number;
        projectCodeId: number;
        createdBy: number;
        statusId: number;
        reviewedBy: number;
        approvedBy: number;
        createdAt: Date;
        updatedAt: Date;
        reviewedAt: Date;
        approvedAt: Date;
        obra: string;
        codigoObra: string;
        company: import("../../database/entities").Company;
        project: import("../../database/entities").Project;
        operationCenter: import("../../database/entities").OperationCenter;
        projectCode: import("../../database/entities").ProjectCode;
        creator: User;
        status: import("../../database/entities").RequisitionStatus;
        reviewer: User;
        approver: User;
        logs: import("../../database/entities").RequisitionLog[];
        purchaseOrders: import("../../database/entities").PurchaseOrder[];
        approvals: import("../../database/entities").RequisitionApproval[];
    }>;
    assignPrices(user: User, id: number, assignPricesDto: any): Promise<{
        items: {
            quotations: import("../../database/entities").RequisitionItemQuotation[];
            itemId: number;
            requisitionId: number;
            itemNumber: number;
            materialId: number;
            quantity: number;
            observation: string;
            requisition: import("../../database/entities").Requisition;
            material: import("../../database/entities").Material;
            purchaseOrderItems: import("../../database/entities").PurchaseOrderItem[];
        }[];
        requisitionId: number;
        requisitionNumber: string;
        companyId: number;
        projectId: number;
        operationCenterId: number;
        projectCodeId: number;
        createdBy: number;
        statusId: number;
        reviewedBy: number;
        approvedBy: number;
        createdAt: Date;
        updatedAt: Date;
        reviewedAt: Date;
        approvedAt: Date;
        obra: string;
        codigoObra: string;
        company: import("../../database/entities").Company;
        project: import("../../database/entities").Project;
        operationCenter: import("../../database/entities").OperationCenter;
        projectCode: import("../../database/entities").ProjectCode;
        creator: User;
        status: import("../../database/entities").RequisitionStatus;
        reviewer: User;
        approver: User;
        logs: import("../../database/entities").RequisitionLog[];
        purchaseOrders: import("../../database/entities").PurchaseOrder[];
        approvals: import("../../database/entities").RequisitionApproval[];
    }>;
    createPurchaseOrders(user: User, id: number, createPurchaseOrdersDto: CreatePurchaseOrdersDto): Promise<{
        requisitionId: number;
        previousStatus: string;
        newStatus: string;
        purchaseOrders: import("../../database/entities").PurchaseOrder[];
    }>;
    getRequisitionReceipts(user: User, id: number): Promise<{
        purchaseOrders: any;
        requisitionId: number;
        requisitionNumber: string;
        companyId: number;
        projectId: number;
        operationCenterId: number;
        projectCodeId: number;
        createdBy: number;
        statusId: number;
        reviewedBy: number;
        approvedBy: number;
        createdAt: Date;
        updatedAt: Date;
        reviewedAt: Date;
        approvedAt: Date;
        obra: string;
        codigoObra: string;
        company: import("../../database/entities").Company;
        project: import("../../database/entities").Project;
        operationCenter: import("../../database/entities").OperationCenter;
        projectCode: import("../../database/entities").ProjectCode;
        creator: User;
        status: import("../../database/entities").RequisitionStatus;
        reviewer: User;
        approver: User;
        items: import("../../database/entities").RequisitionItem[];
        logs: import("../../database/entities").RequisitionLog[];
        approvals: import("../../database/entities").RequisitionApproval[];
    }>;
    createMaterialReceipts(user: User, id: number, createMaterialReceiptDto: CreateMaterialReceiptDto): Promise<{
        purchaseOrders: any;
        requisitionId: number;
        requisitionNumber: string;
        companyId: number;
        projectId: number;
        operationCenterId: number;
        projectCodeId: number;
        createdBy: number;
        statusId: number;
        reviewedBy: number;
        approvedBy: number;
        createdAt: Date;
        updatedAt: Date;
        reviewedAt: Date;
        approvedAt: Date;
        obra: string;
        codigoObra: string;
        company: import("../../database/entities").Company;
        project: import("../../database/entities").Project;
        operationCenter: import("../../database/entities").OperationCenter;
        projectCode: import("../../database/entities").ProjectCode;
        creator: User;
        status: import("../../database/entities").RequisitionStatus;
        reviewer: User;
        approver: User;
        items: import("../../database/entities").RequisitionItem[];
        logs: import("../../database/entities").RequisitionLog[];
        approvals: import("../../database/entities").RequisitionApproval[];
    }>;
    updateMaterialReceipt(user: User, id: number, receiptId: number, updateMaterialReceiptDto: UpdateMaterialReceiptDto): Promise<import("../../database/entities").MaterialReceipt | null>;
    getAllPurchaseOrders(user: User, page?: number, limit?: number, requisitionId?: string, supplierId?: string, fromDate?: string, toDate?: string): Promise<{
        data: import("../../database/entities").PurchaseOrder[];
        total: number;
        page: number;
        totalPages: number;
    }>;
    getPendingPurchaseOrdersForApproval(user: User, page?: number, limit?: number): Promise<{
        data: {
            deadline: Date;
            isOverdue: boolean;
            daysOverdue: number;
            purchaseOrderId: number;
            purchaseOrderNumber: string;
            requisitionId: number;
            supplierId: number;
            issueDate: Date;
            subtotal: number;
            totalIva: number;
            totalDiscount: number;
            totalAmount: number;
            approvalStatusId: number;
            rejectionCount: number;
            lastRejectionReason: string | null;
            currentApproverId: number;
            createdBy: number;
            totalInvoicedAmount: number;
            totalInvoicedQuantity: number;
            invoiceStatus: string;
            createdAt: Date;
            updatedAt: Date;
            requisition: import("../../database/entities").Requisition;
            supplier: import("../../database/entities").Supplier;
            creator: User;
            currentApprover: User;
            approvalStatus: import("../../database/entities").PurchaseOrderStatus;
            items: import("../../database/entities").PurchaseOrderItem[];
            approvals: import("../../database/entities").PurchaseOrderApproval[];
            invoices: import("../../database/entities").Invoice[];
        }[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
    }>;
    getPurchaseOrderForApproval(user: User, id: number): Promise<{
        deadline: Date;
        isOverdue: boolean;
        daysOverdue: number;
        purchaseOrderId: number;
        purchaseOrderNumber: string;
        requisitionId: number;
        supplierId: number;
        issueDate: Date;
        subtotal: number;
        totalIva: number;
        totalDiscount: number;
        totalAmount: number;
        approvalStatusId: number;
        rejectionCount: number;
        lastRejectionReason: string | null;
        currentApproverId: number;
        createdBy: number;
        totalInvoicedAmount: number;
        totalInvoicedQuantity: number;
        invoiceStatus: string;
        createdAt: Date;
        updatedAt: Date;
        requisition: import("../../database/entities").Requisition;
        supplier: import("../../database/entities").Supplier;
        creator: User;
        currentApprover: User;
        approvalStatus: import("../../database/entities").PurchaseOrderStatus;
        items: import("../../database/entities").PurchaseOrderItem[];
        approvals: import("../../database/entities").PurchaseOrderApproval[];
        invoices: import("../../database/entities").Invoice[];
    }>;
    approvePurchaseOrder(user: User, id: number, approvePurchaseOrderDto: ApprovePurchaseOrderDto): Promise<import("../../database/entities").PurchaseOrder>;
    rejectPurchaseOrder(user: User, id: number, rejectionReason: string): Promise<import("../../database/entities").PurchaseOrder>;
    resubmitPurchaseOrder(user: User, id: number, comments?: string): Promise<import("../../database/entities").PurchaseOrder>;
    getPurchaseOrderDetail(user: User, id: number): Promise<import("../../database/entities").PurchaseOrder>;
    getPurchaseOrdersByRequisition(user: User, id: number): Promise<{
        requisition: {
            requisitionId: number;
            requisitionNumber: string;
            status: import("../../database/entities").RequisitionStatus;
        };
        purchaseOrders: import("../../database/entities").PurchaseOrder[];
    }>;
    getLatestMaterialPrice(materialId: number, supplierId: number): Promise<{
        materialId: number;
        supplierId: number;
        unitPrice: number;
        hasIva: boolean;
        ivaPercentage: number;
        discount: number;
        lastUsedDate: Date;
        purchaseOrderNumber: string;
        supplierName: string;
    } | null>;
}
